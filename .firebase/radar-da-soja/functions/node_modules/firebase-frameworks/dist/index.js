const dirname = process.env.__FIREBASE_FRAMEWORKS_ENTRY__;
const usingFirebaseJsSdk = !!process.env.__FIREBASE_DEFAULTS__;
const basename = usingFirebaseJsSdk ? 'firebase-aware' : 'index';
const { handle: frameworkHandle } = await import(`./${dirname}/${basename}.js`);
// TODO move to middleware
const firebaseAware = usingFirebaseJsSdk ? await import('./firebase-aware.js') : undefined;
export const handle = firebaseAware?.handleFactory(frameworkHandle) || frameworkHandle;
